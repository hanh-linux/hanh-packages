# Reference: Artix Linux
name=dhcpcd
ver=9.4.1
desc="DHCP cilent daemon"
home="https://roy.marples.name/projects/dhcpcd"
license="BSD"
depends="musl sh udev"
contain="dhcp-cilent"
sources="https://roy.marples.name/downloads/$name/$name-$ver.tar.xz"
needed="$name-$ver.tar.xz $name.initd" # .initd file used from Alpine Linux

unpack-pkg() {
cd $workdir
tar -xf $hanhdir/$name-$ver.tar.xz
}

compile-pkg() {
cd $workdir/$name-$ver
CFLAGS="$CFLAGS -D_GNU_SOURCE -DHAVE_PRINTF_M"
./configure --host=$CHOST \
      --prefix=/usr \
      --sysconfdir=/etc \
      --sbindir=/usr/bin \
      --libexecdir=/usr/lib/dhcpcd \
      --dbdir=/var/lib/dhcpcd \
      --runstatedir=/run \
      --privsepuser=dhcpcd --enable-ipv6 --without-dev --without-udev
make
}

make-pkg(){
cd $workdir/$name-$ver
make DESTDIR=$pkgdir install
install -dm755 $pkgdir/etc/init.d 
install -Dm755 $hanhdir/$name.initd $pkgdir/etc/init.d/dhcpcd
}
